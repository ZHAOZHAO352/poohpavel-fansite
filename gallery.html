<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PoohPavel相册 - 精彩瞬间收藏</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/css/lightbox.min.css">
    <style>
        .nav-custom {
            background-color: #2c3e50 !important;
        }
        .gallery-hero {
            background: linear-gradient(135deg, #00b09b 0%, #96c93d 100%);
            color: white;
            padding: 60px 0;
            margin-bottom: 40px;
        }
        .gallery-filter {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        .filter-badge {
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }
        .filter-badge:hover {
            transform: scale(1.05);
        }
        .filter-badge.active {
            background-color: white !important;
            color: #00b09b !important;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .gallery-container {
            column-count: 4;
            column-gap: 15px;
            margin: 0 auto;
        }
        @media (max-width: 1200px) {
            .gallery-container { column-count: 3; }
        }
        @media (max-width: 768px) {
            .gallery-container { column-count: 2; }
        }
        @media (max-width: 480px) {
            .gallery-container { column-count: 1; }
        }
        .gallery-item {
            break-inside: avoid;
            margin-bottom: 15px;
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .gallery-item img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.5s ease;
        }
        .gallery-item:hover img {
            transform: scale(1.05);
        }
        .gallery-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            color: white;
            padding: 20px 15px 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .gallery-item:hover .gallery-overlay {
            opacity: 1;
        }
        .photo-info {
            font-size: 12px;
        }
        .photo-likes {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 2px 8px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 2;
        }
        .album-card {
            transition: all 0.3s;
            cursor: pointer;
        }
        .album-card:hover {
            transform: scale(1.03);
        }
        .upload-area {
            border: 3px dashed #ddd;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 30px;
        }
        .upload-area:hover {
            border-color: #00b09b;
            background: rgba(0,176,155,0.05);
        }
        .photo-count-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #ff4757;
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        .zoom-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255,255,255,0.9);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 2;
        }
        .gallery-item:hover .zoom-icon {
            opacity: 1;
        }
        .lightbox-caption {
            text-align: center;
            padding: 10px;
            font-size: 14px;
            color: #666;
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-dark nav-custom fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="bi bi-heart-fill me-2" style="color:#ff6b6b"></i>
                Pooh❤Pavel
            </a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html"><i class="bi bi-house-door"></i> 首页</a></li>
                    <li class="nav-item"><a class="nav-link" href="shows.html"><i class="bi bi-camera-reels"></i> 作品</a></li>
                    <li class="nav-item"><a class="nav-link" href="videos.html"><i class="bi bi-play-btn"></i> 视频</a></li>
                    <li class="nav-item"><a class="nav-link active" href="gallery.html"><i class="bi bi-images"></i> 相册</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html"><i class="bi bi-info-circle"></i> 近况</a></li>
                    <li class="nav-item"><a class="nav-link" href="admin/index.html"><i class="bi bi-pencil-square"></i> 编辑</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- 相册页面头部 -->
    <div class="gallery-hero mt-5">
        <div class="container">
            <h1 class="display-5 fw-bold"><i class="bi bi-images"></i> 相册珍藏</h1>
            <p class="lead">收藏PoohPavel的所有精彩瞬间、活动照片、日常分享</p>
            
            <div class="gallery-filter">
                <div class="text-center mb-3">
                    <h6 class="text-white mb-3">快速筛选：</h6>
                    <div class="d-flex flex-wrap justify-content-center">
                        <span class="badge filter-badge bg-light text-dark active" data-filter="all">全部照片</span>
                        <span class="badge filter-badge bg-primary" data-filter="event">活动照片</span>
                        <span class="badge filter-badge bg-success" data-filter="daily">日常分享</span>
                        <span class="badge filter-badge bg-warning" data-filter="work">工作花絮</span>
                        <span class="badge filter-badge bg-danger" data-filter="sweet">甜蜜时刻</span>
                        <span class="badge filter-badge bg-info" data-filter="fanart">粉丝作品</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 专辑展示 -->
    <div class="container py-4">
        <h4 class="mb-4"><i class="bi bi-folder2-open"></i> 精选专辑</h4>
        <div class="row g-4 mb-5" id="albumContainer">
            <!-- 专辑卡片会动态加载 -->
        </div>

        <!-- 上传区域（仅管理员可见） -->
        <div class="upload-area" onclick="window.location.href='admin/index.html'" id="uploadSection">
            <i class="bi bi-cloud-upload display-4 text-muted mb-3"></i>
            <h5>上传新照片</h5>
            <p class="text-muted">点击这里上传新的照片到相册</p>
            <small class="text-muted">支持 JPG、PNG 格式，单张最大 10MB</small>
        </div>

        <!-- 所有照片 -->
        <div class="mb-4 d-flex justify-content-between align-items-center">
            <h4><i class="bi bi-grid-3x3-gap"></i> 所有照片</h4>
            <span class="badge bg-secondary" id="photoCount">加载中...</span>
        </div>

        <div class="gallery-container" id="galleryContainer">
            <!-- 照片会通过JS动态加载 -->
            <div class="text-center w-100 py-5">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">加载中...</span>
                </div>
                <p class="mt-3">正在加载相册...</p>
            </div>
        </div>
    </div>

    <!-- 回到顶部按钮 -->
    <button onclick="scrollToTop()" id="backToTop" 
            style="display: none; position: fixed; bottom: 20px; left: 20px; z-index: 1000;"
            class="btn btn-primary btn-circle">
        <i class="bi bi-arrow-up"></i>
    </button>

    <!-- 页脚 -->
    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>PoohPavel相册</h5>
                    <p class="mb-0">记录每一个珍贵瞬间</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">共 <span id="totalPhotos">0</span> 张照片</p>
                    <p class="text-muted small">最近更新: <span id="lastUpdate">今天</span></p>
                </div>
            </div>
        </div>
    </footer>

    <!-- 脚本 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/js/lightbox.min.js"></script>
    <script>
        // 配置Lightbox
        lightbox.option({
            'resizeDuration': 200,
            'wrapAround': true,
            'albumLabel': '照片 %1 / %2',
            'fadeDuration': 300,
            'imageFadeDuration': 300
        });

        // 模拟照片数据（实际应从JSON文件加载）
        const photosData = [
            { id: 1, url: "https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", title: "活动合影", date: "2023-11-15", likes: 156, category: "event", album: "粉丝见面会" },
            { id: 2, url: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", title: "日常自拍", date: "2023-11-14", likes: 289, category: "daily", album: "日常分享" },
            { id: 3, url: "https://images.unsplash.com/photo-1533750349088-cd871a92f312?ixlib=rb-4.0.3&auto=format&fit=crop&w-800&q=80", title: "录制现场", date: "2023-11-13", likes: 132, category: "work", album: "工作花絮" },
            { id: 4, url: "https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", title: "甜蜜对视", date: "2023-11-12", likes: 421, category: "sweet", album: "甜蜜时刻" },
            { id: 5, url: "https://images.unsplash.com/photo-1526512340740-9217d0159da9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", title: "粉丝作品", date: "2023-11-11", likes: 98, category: "fanart", album: "粉丝创作" },
            { id: 6, url: "https://images.unsplash.com/photo-1511988617509-a57c8a288659?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", title: "后台准备", date: "2023-11-10", likes: 187, category: "work", album: "工作花絮" },
            { id: 7, url: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", title: "节目宣传照", date: "2023-11-09", likes: 234, category: "event", album: "活动照片" },
            { id: 8, url: "https://images.unsplash.com/photo-1524504388940-b1c1722653e1?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", title: "旅行日常", date: "2023-11-08", likes: 312, category: "daily", album: "日常分享" },
            { id: 9, url: "https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", title: "温馨时刻", date: "2023-11-07", likes: 456, category: "sweet", album: "甜蜜时刻" },
            { id: 10, url: "https://images.unsplash.com/photo-1531123897727-8f129e1688ce?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", title: "卡通版", date: "2023-11-06", likes: 123, category: "fanart", album: "粉丝创作" },
            { id: 11, url: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", title: "媒体采访", date: "2023-11-05", likes: 178, category: "event", album: "活动照片" },
            { id: 12, url: "https://images.unsplash.com/photo-1507591064344-4c6ce005-128?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", title: "美食分享", date: "2023-11-04", likes: 265, category: "daily", album: "日常分享" }
        ];

        // 专辑数据
        const albumsData = [
            { id: 1, name: "粉丝见面会", count: 45, cover: "https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300&q=80", date: "2023-11-15" },
            { id: 2, name: "甜蜜时刻", count: 32, cover: "https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300&q=80", date: "2023-11-14" },
            { id: 3, name: "工作花絮", count: 28, cover: "https://images.unsplash.com/photo-1533750349088-cd871a92f312?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300&q=80", date: "2023-11-13" },
            { id: 4, name: "日常分享", count: 67, cover: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300&q=80", date: "2023-11-12" }
        ];

        let currentFilter = 'all';

        document.addEventListener('DOMContentLoaded', function() {
            // 渲染专辑
            renderAlbums();
            
            // 渲染所有照片
            renderPhotos(photosData);
            
            // 绑定筛选事件
            document.querySelectorAll('.filter-badge').forEach(badge => {
                badge.addEventListener('click', function() {
                    // 更新活动状态
                    document.querySelectorAll('.filter-badge').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 筛选照片
                    currentFilter = this.dataset.filter;
                    filterPhotos(currentFilter);
                });
            });
            
            // 显示照片数量
            updateStats();
            
            // 监听滚动显示回到顶部按钮
            window.addEventListener('scroll', toggleBackToTop);
        });

        function renderAlbums() {
            const albumContainer = document.getElementById('albumContainer');
            albumContainer.innerHTML = albumsData.map(album => `
                <div class="col-md-3">
                    <div class="card album-card h-100" onclick="viewAlbum('${album.name}')">
                        <div class="position-relative">
                            <img src="${album.cover}" class="card-img-top" alt="${album.name}" style="height: 180px; object-fit: cover;">
                            <span class="photo-count-badge">${album.count}</span>
                        </div>
                        <div class="card-body">
                            <h6 class="card-title">${album.name}</h6>
                            <p class="card-text small text-muted">${album.count}张照片 · ${formatDate(album.date)}</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderPhotos(photos) {
            const galleryContainer = document.getElementById('galleryContainer');
            
            if (photos.length === 0) {
                galleryContainer.innerHTML = `
                    <div class="text-center w-100 py-5">
                        <i class="bi bi-image display-1 text-muted"></i>
                        <h5 class="mt-3">暂无照片</h5>
                        <p class="text-muted">这个分类还没有照片，快去上传吧！</p>
                    </div>
                `;
                return;
            }
            
            galleryContainer.innerHTML = photos.map(photo => `
                <div class="gallery-item" data-category="${photo.category}">
                    <span class="photo-likes">
                        <i class="bi bi-heart-fill"></i> ${photo.likes}
                    </span>
                    <div class="zoom-icon">
                        <i class="bi bi-zoom-in text-dark"></i>
                    </div>
                    <a href="${photo.url}" data-lightbox="gallery" data-title="${photo.title} - ${formatDate(photo.date)}">
                        <img src="${photo.url}" alt="${photo.title}" loading="lazy">
                    </a>
                    <div class="gallery-overlay">
                        <h6 class="mb-1">${photo.title}</h6>
                        <div class="photo-info">
                            <span>${formatDate(photo.date)}</span> · 
                            <span>${getCategoryName(photo.category)}</span>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // 重新初始化Lightbox
            lightbox.init();
        }

        function filterPhotos(category) {
            let filteredPhotos = photosData;
            
            if (category !== 'all') {
                filteredPhotos = photosData.filter(photo => photo.category === category);
            }
            
            renderPhotos(filteredPhotos);
            document.getElementById('photoCount').textContent = `${filteredPhotos.length}张照片`;
        }

        function viewAlbum(albumName) {
            const albumPhotos = photosData.filter(photo => photo.album === albumName);
            currentFilter = 'all';
            
            // 更新筛选按钮状态
            document.querySelectorAll('.filter-badge').forEach(b => b.classList.remove('active'));
            document.querySelector('[data-filter="all"]').classList.add('active');
            
            renderPhotos(albumPhotos);
            document.getElementById('photoCount').textContent = `专辑: ${albumName} (${albumPhotos.length}张)`;
            
            // 滚动到相册区域
            document.getElementById('galleryContainer').scrollIntoView({ behavior: 'smooth' });
        }

        function updateStats() {
            document.getElementById('totalPhotos').textContent = photosData.length;
            document.getElementById('photoCount').textContent = `${photosData.length}张照片`;
            document.getElementById('lastUpdate').textContent = '今天';
        }

        function getCategoryName(category) {
            const names = {
                'event': '活动照片',
                'daily': '日常分享',
                'work': '工作花絮',
                'sweet': '甜蜜时刻',
                'fanart': '粉丝作品'
            };
            return names[category] || '其他';
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) return '今天';
            if (diffDays === 1) return '昨天';
            if (diffDays < 7) return `${diffDays}天前`;
            return date.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' });
        }

        function toggleBackToTop() {
            const backToTopBtn = document.getElementById('backToTop');
            if (window.scrollY > 300) {
                backToTopBtn.style.display = 'block';
            } else {
                backToTopBtn.style.display = 'none';
            }
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 模拟点赞功能
        document.addEventListener('click', function(e) {
            if (e.target.closest('.photo-likes')) {
                const likesElement = e.target.closest('.photo-likes');
                let likes = parseInt(likesElement.textContent.match(/\d+/)[0]);
                likes++;
                likesElement.innerHTML = `<i class="bi bi-heart-fill"></i> ${likes}`;
                likesElement.style.animation = 'none';
                setTimeout(() => {
                    likesElement.style.animation = 'heartBeat 0.6s';
                }, 10);
                e.stopPropagation();
            }
        });

        // 添加心跳动画
        const style = document.createElement('style');
        style.textContent = `
            @keyframes heartBeat {
                0% { transform: scale(1); }
                25% { transform: scale(1.3); }
                50% { transform: scale(1); }
                75% { transform: scale(1.3); }
                100% { transform: scale(1); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>